(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const f of r)if(f.type==="childList")for(const S of f.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&s(S)}).observe(document,{childList:!0,subtree:!0});function l(r){const f={};return r.integrity&&(f.integrity=r.integrity),r.referrerPolicy&&(f.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?f.credentials="include":r.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(r){if(r.ep)return;r.ep=!0;const f=l(r);fetch(r.href,f)}})();let p=5;const i=100,d=100,b=document.querySelector("#container").clientHeight*.7/d,C=document.querySelector("#container").clientWidth*.8/i,y=Math.floor(b>C?C:b);let h=!1;const g=document.querySelector("#start"),w=document.querySelector("#reset"),L=document.querySelector("#stop"),A=document.querySelector("#clear"),M=document.querySelector("#velocity"),u=[];u.push(document.querySelector("#pattern1"));u.push(document.querySelector("#pattern2"));u.push(document.querySelector("#pattern3"));u.push(document.querySelector("#pattern4"));const n=[];n.push(document.querySelector("#pattern1").children[0].getContext("2d"));n.push(document.querySelector("#pattern2").children[0].getContext("2d"));n.push(document.querySelector("#pattern3").children[0].getContext("2d"));n.push(document.querySelector("#pattern4").children[0].getContext("2d"));const c=[[[!1,!1,!1,!1,!1],[!1,!1,!0,!1,!1],[!1,!1,!0,!1,!1],[!1,!1,!0,!1,!1],[!1,!1,!1,!1,!1]],[[!1,!1,!1,!1,!1],[!1,!0,!0,!1,!1],[!1,!1,!0,!0,!1],[!1,!1,!0,!1,!1],[!1,!1,!1,!1,!1]],[[!1,!1,!1,!1,!1,!1],[!1,!1,!1,!0,!1,!1],[!1,!0,!1,!1,!0,!1],[!1,!0,!1,!1,!0,!1],[!1,!1,!0,!1,!1,!1],[!1,!1,!1,!1,!1,!1]],[[!1,!1,!1,!1,!1],[!1,!1,!1,!0,!1],[!1,!0,!1,!0,!1],[!1,!1,!0,!0,!1],[!1,!1,!1,!1,!1]]];for(let t=0;t<c.length;t++){n[t].scale(u[t].children[0].width/c[t][0].length,u[t].children[0].height/c[t].length);for(let e=0;e<c[t].length;e++)for(let l=0;l<c[t][0].length;l++)c[t][e][l]?n[t].fillStyle="rgba(200,200,200,0.9)":n[t].fillStyle="rgba(0,0,0,0.9)",n[t].fillRect(l,e,1,1);u[t].onclick=()=>{const e=structuredClone(c[t]);for(let l=0;l<e.length;l++)for(let s=0;s<e[0].length;s++)o[Math.floor(l+d/2-e.length/2)][Math.floor(s+i/2-e[0].length/2)]=e[l][s];x()}}const m=document.querySelector("#game"),a=m.getContext("2d");m.width=y*i;m.height=y*d;a.scale(y,y);let o=new Array(d).fill(!1).map(()=>new Array(i).fill(!1)),q=structuredClone(o),B=0;function O(t){const e=t-B;h&&(e>=1e3/p&&(B=t,v()),window.requestAnimationFrame(O))}function x(){for(let t=0;t<d;t++)for(let e=0;e<i;e++)o[t][e]?a.fillStyle="rgb(255,255,255)":a.fillStyle="rgb(0,0,0)",a.fillRect(e,t,1,1)}g.onclick=()=>{h=!0,g.disabled=!0,q=structuredClone(o),O()};L.onclick=()=>{h=!1,g.disabled=!1,p=5};w.onclick=()=>{h=!1,g.disabled=!1,o=structuredClone(q),p=5,x()};A.onclick=()=>{h=!1,g.disabled=!1,o=new Array(d).fill(!1).map(()=>new Array(i).fill(!1)),q=structuredClone(o),p=5,x()};M.onclick=()=>{p*=2};m.addEventListener("mousedown",t=>{if(h)return;const e=R(t);console.log(e);const l=e.x,s=e.y;o[s][l]=!o[s][l],o[s][l]?a.fillStyle="rgb(255,255,255)":a.fillStyle="rgb(0,0,0)",a.fillRect(l,s,1,1)});function R(t){let e=m.getBoundingClientRect(),l=Math.floor((t.clientX-e.left)/y),s=Math.floor((t.clientY-e.top)/y);return{x:l,y:s}}function v(){const t=structuredClone(o);for(let e=0;e<d;e++)for(let l=0;l<i;l++){let s=0;for(let r=-1;r<=1;r++)for(let f=-1;f<=1;f++)try{f===0&&r===0||t[e+r][l+f]&&s++}catch{}!t[e][l]&&s===3?o[e][l]=!0:t[e][l]&&(s>3||s<=1)?o[e][l]=!1:t[e][l]&&(s===2||s===3)&&(o[e][l]=!0),o[e][l]?a.fillStyle="rgb(255,255,255)":a.fillStyle="rgb(0,0,0)",a.fillRect(l,e,1,1)}}
